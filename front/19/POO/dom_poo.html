<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POO - Persona, Autor y Libro</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            color: #34495e;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 30px;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .control-group h3 {
            margin-top: 0;
            color: #e74c3c;
        }

        button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .info-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .info-card h4 {
            margin-top: 0;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .book-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .book-detail {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .book-detail strong {
            color: #2c3e50;
        }

        .status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0;
        }

        .status.leido {
            background: #2ecc71;
            color: white;
        }

        .status.por-leer {
            background: #f39c12;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö POO - Persona, Autor y Libro</h1>
        
        <div class="info-card">
            <h4>üéØ Demostraci√≥n de Herencia y Composici√≥n</h4>
            <p>Esta aplicaci√≥n demuestra:</p>
            <ul>
                <li><strong>Herencia:</strong> Autor extiende de Persona</li>
                <li><strong>Composici√≥n:</strong> Libro contiene un Autor</li>
                <li><strong>Encapsulaci√≥n:</strong> M√©todos para interactuar con los objetos</li>
            </ul>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3>üë§ Crear Autor</h3>
                <input type="text" id="autorNombre" placeholder="Nombre del autor" value="Gabriel Garc√≠a M√°rquez">
                <input type="text" id="autorNacionalidad" placeholder="Nacionalidad" value="Colombia">
                <button onclick="crearAutor()">Crear Autor</button>
            </div>

            <div class="control-group">
                <h3>üìö Crear Libro</h3>
                <input type="text" id="libroTitulo" placeholder="T√≠tulo del libro" value="Cien a√±os de soledad">
                <input type="text" id="libroISBN" placeholder="ISBN" value="978-84-376-0494-7">
                <input type="text" id="libroGenero" placeholder="G√©nero" value="Realismo m√°gico">
                <input type="number" id="libroPaginas" placeholder="P√°ginas" value="496">
                <input type="number" id="libroAnio" placeholder="A√±o" value="1967">
                <button onclick="crearLibro()">Crear Libro</button>
            </div>

            <div class="control-group">
                <h3>üìñ Acciones del Libro</h3>
                <input type="number" id="paginasLeer" placeholder="P√°ginas a leer" value="50" min="1">
                <button onclick="leerLibro()">Leer P√°ginas</button>
                <button onclick="marcarComoLeido()">Marcar como Le√≠do</button>
                <button onclick="mostrarInfoLibro()">Mostrar Info</button>
            </div>
        </div>

        <div id="libroInfo" class="book-info" style="display: none;">
            <!-- La informaci√≥n del libro se mostrar√° aqu√≠ -->
        </div>

        <div id="output" class="output">Haz clic en los botones para interactuar con los objetos...</div>
    </div>

    <script>
        // ============================================
        // CLASES CORREGIDAS
        // ============================================

        class Persona {
            constructor(nombre) {
                this.nombre = nombre;
            }
        }

        class Autor extends Persona {
            constructor(nombre, nacionalidad) {
                super(nombre);
                this.nacionalidad = nacionalidad;
            }
        }

        class Libro {
            constructor(titulo, ISBN, genero, autor, paginas, anio) {
                this.titulo = titulo;
                this.ISBN = ISBN;
                this.genero = genero;
                this.autor = autor;
                this.paginas = paginas;
                this.paginaActual = 0; // Corregido: era una asignaci√≥n incorrecta
                this.anio = anio;
                this.leido = false;
            }

            leer(paginasLeidas = 1) {
                this.paginaActual += paginasLeidas;
                this.log(`üìñ Leyendo ${paginasLeidas} p√°ginas de "${this.titulo}"`);
                
                if (this.paginaActual >= this.paginas) {
                    this.marcarComoLeido();
                }
                
                this.actualizarInterfaz();
            }

            marcarComoLeido() {
                this.leido = true;
                this.log(`‚úÖ Libro "${this.titulo}" marcado como le√≠do`);
                this.actualizarInterfaz();
            }

            getInfo() {
                const info = {
                    titulo: this.titulo,
                    ISBN: this.ISBN,
                    genero: this.genero,
                    autor: this.autor.nombre,
                    nacionalidadAutor: this.autor.nacionalidad,
                    paginas: this.paginas,
                    paginaActual: this.paginaActual,
                    anio: this.anio,
                    leido: this.leido,
                    progreso: Math.round((this.paginaActual / this.paginas) * 100)
                };
                
                this.log("üìã Informaci√≥n del libro:");
                this.log(JSON.stringify(info, null, 2));
                return info;
            }

            log(mensaje) {
                const output = document.getElementById('output');
                output.textContent += mensaje + '\n';
                output.scrollTop = output.scrollHeight;
            }

            actualizarInterfaz() {
                const libroInfoDiv = document.getElementById('libroInfo');
                if (!this.libroActual) return;

                const progreso = Math.round((this.paginaActual / this.paginas) * 100);
                
                libroInfoDiv.innerHTML = `
                    <div class="book-detail">
                        <strong>üìö T√≠tulo:</strong><br>
                        ${this.titulo}
                    </div>
                    <div class="book-detail">
                        <strong>üë§ Autor:</strong><br>
                        ${this.autor.nombre}<br>
                        <small>${this.autor.nacionalidad}</small>
                    </div>
                    <div class="book-detail">
                        <strong>üìñ Progreso:</strong><br>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progreso}%">
                                ${progreso}%
                            </div>
                        </div>
                        ${this.paginaActual}/${this.paginas} p√°ginas
                    </div>
                    <div class="book-detail">
                        <strong>üìä Estado:</strong><br>
                        <span class="status ${this.leido ? 'leido' : 'por-leer'}">
                            ${this.leido ? '‚úÖ Le√≠do' : 'üìñ Por leer'}
                        </span>
                    </div>
                    <div class="book-detail">
                        <strong>üìã Detalles:</strong><br>
                        ISBN: ${this.ISBN}<br>
                        G√©nero: ${this.genero}<br>
                        A√±o: ${this.anio}
                    </div>
                `;
                libroInfoDiv.style.display = 'grid';
            }
        }

        // ============================================
        // VARIABLES GLOBALES
        // ============================================

        let autorActual = null;
        let libroActual = null;

        // ============================================
        // FUNCIONES DE LA INTERFAZ
        // ============================================

        function crearAutor() {
            const nombre = document.getElementById('autorNombre').value;
            const nacionalidad = document.getElementById('autorNacionalidad').value;
            
            if (!nombre || !nacionalidad) {
                alert('Por favor completa todos los campos del autor');
                return;
            }
            
            autorActual = new Autor(nombre, nacionalidad);
            log(`‚úÖ Autor creado: ${autorActual.nombre} (${autorActual.nacionalidad})`);
            
            // Habilitar creaci√≥n de libro
            document.querySelector('.control-group:nth-child(2) button').disabled = false;
        }

        function crearLibro() {
            if (!autorActual) {
                alert('Primero debes crear un autor');
                return;
            }
            
            const titulo = document.getElementById('libroTitulo').value;
            const ISBN = document.getElementById('libroISBN').value;
            const genero = document.getElementById('libroGenero').value;
            const paginas = parseInt(document.getElementById('libroPaginas').value);
            const anio = parseInt(document.getElementById('libroAnio').value);
            
            if (!titulo || !ISBN || !genero || !paginas || !anio) {
                alert('Por favor completa todos los campos del libro');
                return;
            }
            
            libroActual = new Libro(titulo, ISBN, genero, autorActual, paginas, anio);
            libroActual.libroActual = libroActual; // Para la interfaz
            
            log(`‚úÖ Libro creado: "${libroActual.titulo}"`);
            log(`üìö Autor: ${libroActual.autor.nombre}`);
            
            // Habilitar acciones del libro
            document.querySelector('.control-group:nth-child(3) button').disabled = false;
            document.querySelector('.control-group:nth-child(3) button:nth-child(2)').disabled = false;
            document.querySelector('.control-group:nth-child(3) button:nth-child(3)').disabled = false;
            
            libroActual.actualizarInterfaz();
        }

        function leerLibro() {
            if (!libroActual) {
                alert('Primero debes crear un libro');
                return;
            }
            
            const paginas = parseInt(document.getElementById('paginasLeer').value) || 1;
            libroActual.leer(paginas);
        }

        function marcarComoLeido() {
            if (!libroActual) {
                alert('Primero debes crear un libro');
                return;
            }
            
            libroActual.marcarComoLeido();
        }

        function mostrarInfoLibro() {
            if (!libroActual) {
                alert('Primero debes crear un libro');
                return;
            }
            
            libroActual.getInfo();
        }

        function log(mensaje) {
            const output = document.getElementById('output');
            output.textContent += mensaje + '\n';
            output.scrollTop = output.scrollHeight;
        }

        // ============================================
        // INICIALIZACI√ìN
        // ============================================

        // Deshabilitar botones inicialmente
        document.querySelector('.control-group:nth-child(2) button').disabled = true;
        document.querySelector('.control-group:nth-child(3) button').disabled = true;
        document.querySelector('.control-group:nth-child(3) button:nth-child(2)').disabled = true;
        document.querySelector('.control-group:nth-child(3) button:nth-child(3)').disabled = true;

        log("üéØ Aplicaci√≥n POO iniciada");
        log("üìù Instrucciones:");
        log("1. Crea un autor");
        log("2. Crea un libro");
        log("3. Interact√∫a con el libro");
    </script>
</body>
</html>
